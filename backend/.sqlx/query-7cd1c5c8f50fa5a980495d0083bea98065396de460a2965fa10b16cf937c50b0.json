{
  "db_name": "PostgreSQL",
  "query": "select\n                ae.route_id,\n                array_agg(\n                    distinct jsonb_build_object(\n                        'id',\n                        a.id,\n                        'header',\n                        a.header_html,\n                        'description',\n                        a.description_html,\n                        'alert_type',\n                        a.alert_type,\n                        'updated_at',\n                        a.updated_at,\n                        'active_periods',\n                        ap\n                    )\n                ) as alerts\n            from\n                alerts a\n                left join active_periods ap on a.id = ap.alert_id\n                left join affected_entities ae on a.id = ae.alert_id\n            where\n                ae.route_id is not null\n                and a.in_feed = true\n                and ap.start_time < now()\n                and (\n                    ap.end_time > now()\n                    or ap.end_time is null\n                )\n            group by\n                ae.route_id;",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "route_id",
        "type_info": "Varchar"
      },
      {
        "ordinal": 1,
        "name": "alerts",
        "type_info": "JsonbArray"
      }
    ],
    "parameters": {
      "Left": []
    },
    "nullable": [
      true,
      null
    ]
  },
  "hash": "7cd1c5c8f50fa5a980495d0083bea98065396de460a2965fa10b16cf937c50b0"
}
